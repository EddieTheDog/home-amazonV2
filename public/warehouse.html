<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Warehouse - Laptop</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
h1 { color: #333; }
label { display: block; margin: 8px 0; }
input { padding: 5px; width: 250px; }
button { padding: 6px 12px; margin-top: 10px; }
#result { background: #f5f5f5; padding: 10px; margin-top: 10px; white-space: pre-wrap; }
</style>
</head>
<body>
<h1>Warehouse - Laptop</h1>

<label>Session Key: <input type="text" id="sessionKey"></label>
<label>Employee Name: <input type="text" id="employee"></label>
<label>Location: <input type="text" id="location"></label>

<h2>Manual Scan</h2>
<label>Barcode or Package ID: <input type="text" id="barcode"></label>
<button id="manualScan">Scan</button>

<pre id="result"></pre>

<script>
const result = document.getElementById('result');

async function sendScan(barcode) {
  const sessionKey = document.getElementById('sessionKey').value;
  const employee = document.getElementById('employee').value;
  const location = document.getElementById('location').value;
  if(!barcode || !sessionKey || !employee || !location) return alert("Fill all fields");

  const res = await fetch('/api/package/scan', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({
      sessionKey,
      barcode,
      action: 'scanned',
      location,
      employee
    })
  });
  const json = await res.json();
  result.textContent = JSON.stringify(json.package, null, 2);
}

document.getElementById('manualScan').addEventListener('click', () => {
  const barcode = document.getElementById('barcode').value;
  sendScan(barcode);
});
</script>
</body>
</html>
